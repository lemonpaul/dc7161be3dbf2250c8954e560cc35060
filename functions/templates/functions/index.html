<script src="https://code.highcharts.com/highcharts.src.js"></script>
<form action="{% url 'functions:done' %}" method="post">
    {% csrf_token %}
    <table width="100%">
        <tr>
            <td nowrap>
                <select name="action">
                    <option value="update">Обновить</option>
                    <option value="delete">Удалить</option>
                </select>
            </td>
            <td>
                <input type="submit" value="Выполнить">
            </td>
            <td colspan="4" align="right">
                <a href="{% url 'functions:add' %}" style="-moz-appearance: button; -webkit-appearance: button; text-decoration: none; color: initial; font-family: sans-serif; font-size: 13.5">Добавить</a>
            </td>
        </tr>
        {% if function_list %}
            <tr align="center">
                <th>
                    <input type="checkbox" onClick="checkboxes = document.getElementsByTagName('input'); for (var i=0, n=checkboxes.length; i<n; i++) checkboxes[i].checked = this.checked;" />
                </th>
                <th>Функция</th>
                <th>График</th>
                <th>Интервал t, дней</th>
                <th>Шаг t, часы</th>
                <th>Дата обработки</th>
            </tr>
            {% for function in function_list %}
                <tr align="center">
                    <td><input type="checkbox" name="formula{{ function.id }}" value="{{ function.id }}"></td>
                    <td>{{ function.formula }}</td>
                    <td width="50%">
                        {% if function.plot %}
                        <img src="{{ function.plot.url }}"/>
                        {% else %}
                        {{ function.error }}
                        {% endif %}
                    </td>
                    <td>{{ function.interval }}</td>
                    <td>{{ function.step }}</td>
                    <td>{{ function.format_modified }}</td>
                </tr>
            {% endfor %}
        {% else %}
        <tr><td>Нет сохраненных функций.</td></tr>
        {% endif %}
    </table>
</form>
